---
import { buttonVariants } from "@/components/ui/button";
import { icons, AlertTriangle, type LucideProps } from "lucide-react";
import { socialLinks } from "@/config";
import { XIcon, DiscordIcon } from "@/lib/customIcons.ts";

// TODO: make this cleaner
// customs icons are created at /src/lib/customIcons.ts
const customIconMap: Record<string, React.ForwardRefExoticComponent<Omit<LucideProps, "ref"> & React.RefAttributes<SVGSVGElement>>> = {
  X: XIcon,
  Discord: DiscordIcon
};

---
{socialLinks.map(({ url, icon, title }) => {
  // Prefer custom icon if available, then Lucide, then fallback
  const LucideIcon =
    customIconMap[icon] ||
    icons[icon as keyof typeof icons] ||
    AlertTriangle;


  if (!customIconMap[icon] && !icons[icon as keyof typeof icons]) {
    console.warn(`WARN: Icon "${icon}" not found in lucide-react or customIconMap. Using fallback.`);
  }

  return (
    <a
      href={url}
      target="_blank"
      rel="noreferrer"
      class={`${buttonVariants({ variant: "default" })} m-1 transition-all duration-300 hover:ring-2 hover:ring-gray-600`}
      aria-label={title}
    >
      <LucideIcon className="h-5 w-5" />
    </a>
  );
})}
