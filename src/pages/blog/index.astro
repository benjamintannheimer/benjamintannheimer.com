---
import PageLayout from "@/components/page/PageLayout.astro";
import { buttonVariants } from "@/components/ui/button";
import { Image } from "astro:assets";
import { getPosts } from "@/lib/getPosts";
import { blogPageContent } from "@/config";

const posts = await getPosts();

const { seo, page } = blogPageContent;
---

<PageLayout
  seo={seo}
  page={page}
>
  <!-- Blog Post Grid -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
    {posts.map((post) => (
      <a href={`/blog/${post.id}`} class="border rounded-lg overflow-hidden shadow-md hover:shadow-lg transition duration-300 rounded-lg overflow-hidden shadow-lg hover:shadow-xl transition duration-300 flex flex-col h-full">
        <Image
          src={post.data.image.url}
          alt={post.data.image.alt}
          width={400}
          height={225}
          class="w-full h-48 object-cover"
        />
        <div class="p-6 flex flex-col flex-grow">
          <h2 class="text-xl font-bold mb-2 line-clamp-2">{post.data.title}</h2>
          <p class="text-sm text-gray-500 dark:text-gray-400 mb-4">
            {new Date(post.data.pubDate).toLocaleDateString("de-CH")}
          </p>
          <p class="text-gray-600 dark:text-gray-300 mb-4 flex-grow line-clamp-3">{post.data.description}</p>
          <button class={buttonVariants({ variant: 'default' }) + " mt-auto"}>Read More</button>
        </div>
      </a>
    ))}
  </div>
</PageLayout>
